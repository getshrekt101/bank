<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funds</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
<div class="container py-5">
    <h2 class="mb-4">Funds Management</h2>

    <!-- Deposit Form -->
    <h4>Deposit Funds</h4>
    <form id="depositForm" class="mb-4">
        <div class="row g-3">
            <div class="col-md-3">
                <input type="number" step="0.01" class="form-control" placeholder="Amount" id="depositAmount" required />
            </div>
            <div class="col-md-3">
                <input type="text" class="form-control" placeholder="Item Name" id="depositItem" />
            </div>
            <div class="col-md-3">
                <input type="text" class="form-control" placeholder="Organization Name" id="depositOrg" />
            </div>
            <div class="col-md-3">
                <select class="form-select" id="depositStatus">
                    <option value="">Status</option>
                    <option value="PENDING">PENDING</option>
                    <option value="IN_PROGRESS">IN_PROGRESS</option>
                    <option value="COMPLETED">COMPLETED</option>
                </select>
            </div>
            <div class="col-md-6">
                <input type="text" class="form-control" placeholder="Account ID" id="depositAccount" required />
            </div>
        </div>
        <button class="btn btn-success mt-3" type="submit">Deposit</button>
    </form>

    <!-- Withdraw Form -->
    <h4>Withdraw Funds</h4>
    <form id="withdrawForm" class="mb-4">
        <div class="row g-3">
            <div class="col-md-3">
                <input type="number" step="0.01" class="form-control" placeholder="Amount" id="withdrawAmount" required />
            </div>
            <div class="col-md-3">
                <input type="text" class="form-control" placeholder="Item Name" id="withdrawItem" />
            </div>
            <div class="col-md-3">
                <input type="text" class="form-control" placeholder="Organization Name" id="withdrawOrg" />
            </div>
            <div class="col-md-3">
                <select class="form-select" id="withdrawStatus">
                    <option value="">Status</option>
                    <option value="PENDING">PENDING</option>
                    <option value="IN_PROGRESS">IN_PROGRESS</option>
                    <option value="COMPLETED">COMPLETED</option>
                </select>
            </div>
            <div class="col-md-6">
                <input type="text" class="form-control" placeholder="Account ID" id="withdrawAccount" required />
            </div>
        </div>
        <button class="btn btn-warning mt-3" type="submit">Withdraw</button>
    </form>

    <!-- Transfer Form -->
    <h4>Transfer Funds</h4>
    <form id="transferForm">
        <div class="row g-3">
            <div class="col-md-3">
                <input type="number" step="0.01" class="form-control" placeholder="Amount" id="transferAmount" required />
            </div>
            <div class="col-md-3">
                <input type="text" class="form-control" placeholder="Item Name" id="transferItem" />
            </div>
            <div class="col-md-3">
                <input type="text" class="form-control" placeholder="Organization Name" id="transferOrg" />
            </div>
            <div class="col-md-3">
                <select class="form-select" id="transferStatus">
                    <option value="">Status</option>
                    <option value="PENDING">PENDING</option>
                    <option value="IN_PROGRESS">IN_PROGRESS</option>
                    <option value="COMPLETED">COMPLETED</option>
                </select>
            </div>
            <div class="col-md-6">
                <input type="text" class="form-control" placeholder="From Account ID" id="fromId" required />
            </div>
            <div class="col-md-6">
                <input type="text" class="form-control" placeholder="To Account ID" id="toId" required />
            </div>
        </div>
        <button class="btn btn-info mt-3" type="submit">Transfer</button>
    </form>
</div>

<script>
    document.getElementById('depositForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const data = {
            amount: parseFloat(depositAmount.value),
            itemName: depositItem.value,
            organizationName: depositOrg.value,
            status: depositStatus.value,
            accountId: depositAccount.value
        };
        try {
            await axios.post('http://localhost:8080/funds/deposit', data);
            alert('Deposit successful');
            e.target.reset();
        } catch (err) {
            alert('Deposit failed');
        }
    });

    document.getElementById('withdrawForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const data = {
            amount: parseFloat(withdrawAmount.value),
            itemName: withdrawItem.value,
            organizationName: withdrawOrg.value,
            status: withdrawStatus.value,
            accountId: withdrawAccount.value
        };
        try {
            await axios.post('http://localhost:8080/funds/withdraw', data);
            alert('Withdraw successful');
            e.target.reset();
        } catch (err) {
            alert('Withdraw failed');
        }
    });

    document.getElementById('transferForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const fromId = document.getElementById('fromId').value;
        const toId = document.getElementById('toId').value;
        const data = {
            amount: parseFloat(transferAmount.value),
            itemName: transferItem.value,
            organizationName: transferOrg.value,
            status: transferStatus.value
        };
        try {
            await axios.post(`http://localhost:8080/funds/${fromId}/transfer/${toId}`, data);
            alert('Transfer successful');
            e.target.reset();
        } catch (err) {
            alert('Transfer failed');
        }
    });
</script>
</body>
</html>
